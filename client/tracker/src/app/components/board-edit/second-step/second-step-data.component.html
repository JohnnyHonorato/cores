<div id="second-step" class="card">
    <div class="card-body">
        <div class="row">
            <div class="d-flex justify-content-between px-1 mb-3">
                <div class="col-6 m-0">
                    <div class="padding-left-custom">
                        <div class="page-title-wizard" translate> tracker-manager.card-data</div>
                        <div class="page-description-wizard"
                             *ngxPermissionsOnly="['TRACKER/update-*', 'TRACKER/insert-*', 'TRACKER/insert-tracker-model', 'TRACKER/update-tracker-model']"
                             translate> tracker-manager.card-data-description
                        </div>
                    </div>
                </div>
                <div class="m-0 my-1" *ngIf="!openChangeResizeAndReorder">
                    <div
                        *ngxPermissionsOnly="['TRACKER/update-*','TRACKER/insert-*', 'TRACKER/insert-tracker-model', 'TRACKER/update-tracker-model']">
                        <button id="open-modal-btn" type="button"
                                class="btn btn-primary add-att-btn"
                                (click)="openCustomAttributeModal(null)">
                            <span translate>
                                tracker-manager.attribute.add
                            </span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-12 px-1" *ngIf="!openChangeResizeAndReorder && indexToAddAttribute>0">
                <ul class="mb-0 "
                    *ngxPermissionsOnly="['TRACKER/update-*', 'TRACKER/insert-*', 'TRACKER/update-tracker-model', 'TRACKER/insert-tracker-model']">
                    <li class="reorder-resize-div col-md-12 mb-2">
                        <div id="show-resize-btn" class="reorder-resize att-name-padding" role="button"
                             (click)="showChangeResizeAndReorder(true)">
                            <i id="resize-icon" class="material-icons-outlined me-1"> view_compact </i>
                            {{ 'tracker-manager.attribute.reorder-and-resize' | translate }}
                        </div>
                    </li>
                </ul>
            </div>
            <div class="col-12 px-1" *ngIf="!openChangeResizeAndReorder">
                <ul class="mb-0">
                    <li class="status-item">
                        <div class="col-md-6">
                            <div id="card-name" class="text-truncate att-name-padding">
                                {{ 'tracker.card.name' | translate }} </div>
                        </div>
                        <div class="col-md-6">
                            <div id="type-string-label" class="text-truncate status-type-text">
                                {{ 'tracker-manager.attribute.type.string' | translate }}
                            </div>
                        </div>
                    </li>
                    <li class="status-item">
                        <div class="col-md-6">
                            <div id="description-label" class="text-truncate att-name-padding">
                                {{ 'tracker.card.description' | translate }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div id="string-label" class="text-truncate status-type-text">
                                {{ 'tracker-manager.attribute.type.string' | translate }} </div>
                        </div>
                    </li>
                    <li class="status-item">
                        <div class="col-md-6">
                            <div id="due-date-label" class="text-truncate att-name-padding">
                                {{ 'tracker.card.due-date' | translate }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div id="date-label" class="text-truncate status-type-text">
                                {{ 'tracker-manager.attribute.type.date' | translate }} </div>
                        </div>
                    </li>
                    <li class="status-item">
                        <div class="col-md-6">
                            <div id="tags-label" class="text-truncate att-name-padding">
                                {{ 'tracker.card.tags.title' | translate }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div id="tags-list" class="text-truncate status-type-text">
                                {{ 'tracker-manager.attribute.type.list' | translate }} </div>
                        </div>
                    </li>
                    <li class="status-item">
                        <div class="col-md-6">
                            <div id="members-label" class="text-truncate att-name-padding">
                                {{ 'tracker.card.members' | translate }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div id="members-list" class="text-truncate status-type-text">
                                {{ 'tracker-manager.attribute.type.list' | translate }} </div>
                        </div>
                    </li>
                    <li class="status-item">
                        <div class="col-md-6">
                            <div id="due-date-label" class="text-truncate att-name-padding">
                                {{ 'tracker.links' | translate }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div id="date-label" class="text-truncate status-type-text">
                                {{ 'tracker-manager.attribute.type.link' | translate }} </div>
                        </div>
                    </li>
                    <li class="status-item">
                        <div class="col-md-6">
                            <div id="attachment-label" class="text-truncate att-name-padding ml-1">
                                {{ 'tracker.card.attachment.title' | translate }}
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div id="file-label" class="text-truncate status-type-text">
                                {{ 'tracker-manager.attribute.type.attachment' | translate }} </div>
                        </div>
                        <div class="text-right pull-right col-md-2">
                            <button id="file-config-label" type="button" class="btn-muted btn-config"
                                    (click)="openAttachmentTypesModal()">
                                <i id="settings-icon" class="material-icons-outlined "> settings </i></button>
                        </div>
                    </li>
                </ul>

                <ul class="mb-0 custom-att-font-size" *ngFor="let item of customAttributes; let i = index">
                    <li class="editable-status-item" *ngIf="!item.deleted">
                        <div class="col-md-6">
                            <div id="title-label" class="text-truncate att-name-padding">
                                {{item.title}}
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div id="formated-display-label" class="text-truncate status-type-text">
                                {{getTypeToDisplayFormatted(item.type) | translate}}
                            </div>
                        </div>
                        <div class="text-right pull-right col-md-2 p-1">
                            <div
                                *ngxPermissionsOnly="['TRACKER/update-*', 'TRACKER/insert-*', 'TRACKER/update-tracker-model', 'TRACKER/insert-tracker-model']">
                                <button id="open-modal-btn-1" type="button" class="btn-muted"
                                        (click)="openCustomAttributeModal(item)">
                                    <i id="edit-icon" class="material-icons-outlined"> edit </i>
                                </button>
                            </div>
                            <div
                                *ngxPermissionsOnly="['TRACKER/delete-*', 'TRACKER/insert-*', 'TRACKER/delete-attribute', 'TRACKER/delete-tracker-model', 'TRACKER/insert-tracker-model']">
                                <button id="remove-btn" type="button" class="btn-muted text-danger"
                                        data-bs-target="#modal-delete-attributes" data-bs-toggle="modal"
                                        (click)="setRemoveIndex(i)">
                                    <i id="delete-icon" class="material-icons-outlined"> delete </i>
                                </button>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div *ngIf="openChangeResizeAndReorder">
            <tracker-resize-and-reorder [setList]="customAttributes" (update)="updateCustomAttributes($event)">
            </tracker-resize-and-reorder>
        </div>
    </div>
    <div class="modal-footer" *ngIf="!openChangeResizeAndReorder">
        <button id="previous-btn" type="button" class="btn btn-back" awPreviousStep>
            <span id="previous-icon" class="material-icons-outlined previous"> keyboard_arrow_left </span>
            <span id="previous-label" translate>system.previous</span>
        </button>
        <button id="next-btn" type="button" class="btn btn-next" awNextStep>
            <span id="next-label" translate>system.next</span>
            <span id="next-icon" class="material-icons-outlined next"> keyboard_arrow_right </span>
        </button>
    </div>
</div>

<common-delete-confirmation (ok)="delete()" target="modal-delete-attributes">
</common-delete-confirmation>
